"use strict";var DOMson=function(e,t){function r(r){if(r!==t){var n=r.keywords;n!==t&&(u=e.extend(u,n));var i=r.options;i!==t&&(f=e.extend(f,i))}}function n(r){d=e(r!==t?r:"*"),d.find(":input, select").on("change",function(){var r=e(this).attr("type"),n=e(this).attr(u.exportKey);n!==t&&""!==n&&("checkbox"===r?e("["+u.exportKey+"="+n+"]").attr(u.modified,!0):e(this).attr(u.modified,!0))}),c=!0}function i(){null!==d&&c&&(d.off("change"),d=null,c=!1)}function o(){var r={};return d.find("["+u.required+"]").each(function(n,i){var o=e(i).attr(u.exportKey);if(o!==t&&""!==o){var a=e(i).attr(u.required),f=a!==t&&a!==!1;f!==!1&&(i.value===t||""===i.value)&&(r[o]===t&&(r[o]=[]),-1===e.inArray(r[o],"empty")&&r[o].push("empty"))}}),r}function a(r,n){e(r).children().each(function(r,i){var o=e(i).attr("type"),c=i.tagName.toUpperCase(),d=e(i).attr(u.exportKey),l=d!==t&&""!==d;if(l===!1)return a(i,n),t;if("DIV"!==c){var s=e(i).attr(u.modified),p=s!==t&&s!==!1;if(p!==!1||!f.exportModifiedData)if("SELECT"===c)n[d]=i.options[i.selectedIndex].value;else if("INPUT"===c)if("checkbox"===o){n[d]===t&&(n[d]=[]);var h=e(i).prop("checked");h!==t&&h===!0&&n[d].push(i.value)}else if("radio"===o){n[d]="";var h=e(i).prop("checked");h!==t&&h===!0&&(n[d]=i.value)}else n[d]=i.value}else{var v={};if(a(i,v),0!==Object.keys(v).length)if(n[d]!==t){if(typeof n[d]==typeof{}){var y=n[d];n[d]=[],n[d].push(y)}n[d].push(v)}else n[d]=v}})}var u={exportKey:"export-key",required:"required",modified:"modified"},f={exportModifiedData:!0},c=!1,d=null;return{attach:function(e,i){return c===!0?(console.error("DOMson already attached"),t):(r(i),n(e),c===!0)},detach:function(){return i(),c===!1},validate:function(){return null===d||c===!1?(console.error("DOMson is not attached"),t):o()},"export":function(){if(null===d||c===!1)return console.error("DOMson is not attached"),t;var e={};return a(d,e),e}}}(jQuery);
