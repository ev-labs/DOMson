"use strict";!function(e,r,t){function o(e){e!==t&&(s=r.extend(s,e))}function n(e,o){var a=r(e),c=a[0].tagName.toLowerCase();o===t&&(o="change");var p=o+".domson";-1!==r.inArray(c,i)&&a.off(p).one(p,function(){var e=a.attr("type"),o=a.attr(s.keywords.exportKey);o!==t&&""!==o&&("checkbox"===e?r("["+s.keywords.exportKey+"="+o+"]").attr(s.keywords.exportTarget,!0):a.attr(s.keywords.exportTarget,!0))});var u=i.join(",");a.children().length>0&&a.find(u).each(function(){n(this)})}function a(e,o){var n=r(e),c=n[0].tagName.toLowerCase(),p=n.attr(s.keywords.exportKey),u=p!==t&&""!==p,f=-1!==r.inArray(c,i),y=n.children();if(0===y.length||f){var d=n.attr("type"),l=n.attr(s.keywords.exportTarget),h=l!==t&&l!==!1;if(h===!1&&s.options.exportOnlyTarget)return;if("select"===c)o[p]=e.options[e.selectedIndex].value;else if("input"===c)if("checkbox"===d){o[p]===t&&(o[p]=[]);var v=n.prop("checked");v!==t&&v===!0&&o[p].push(e.value)}else if("radio"===d){var v=n.prop("checked");v!==t&&v===!0&&(o[p]=e.value)}else if(o[p]!==t){if(!1===Array.isArray(o[p])){var x=o[p];o[p]=[],o[p].push(x)}o[p].push(e.value)}else o[p]=e.value}else{for(var g=u?{}:o,k=0;k<y.length;k++){var w=y[k];a(w,g)}if(0===Object.keys(g).length)return;if(!1===u)return;if(o[p]!==t){if(!1===Array.isArray(o[p])){var x=o[p];o[p]=[],o[p].push(x)}o[p].push(g)}else o[p]=g}}var i=["input","select"],s={keywords:{exportKey:"export-key",exportTarget:"export-target"},options:{exportOnlyTarget:!0}},c=e.DOMson||{};c.watch=function(e){e===t&&(e=document.body),n(e)},c.export=function(e){e===t&&(e=document.body);var r={};return a(e,r),r},c.config=function(e){o(e)},e.DOMson=c}(window,jQuery);
