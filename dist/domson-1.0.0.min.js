"use strict";var DOMson=function(t,e){function r(t){if(t!==e){{t.keywords}if(keywords!==e){var r=t.dataKey,a=t.dataRequired,n=t.dataModified;r!==e&&""!==r&&(u=r),a!==e&&""!==a&&(c=a),n!==e&&""!==n&&(f=n)}}}function a(r){l=t(r!==e?r:"*"),l.find(":input").on("change",function(){var r=t(this).attr("type"),a=t(this).attr(u);a!==e&&""!==a&&("checkbox"===r?t("["+u+"="+a+"]").attr(f,!0):t(this).attr(f,!0))}),d=!0}function n(){null!==l&&d&&(l.off("change"),l=null,d=!1)}function i(){var r={};return l.find("["+c+"]").each(function(a,n){var i=t(n).attr(u);if(i!==e&&""!==i){var o=t(n).attr(c),f=o!==e&&o!==!1;f!==!1&&(n.value===e||""===n.value)&&(r[i]===e&&(r[i]=[]),-1===t.inArray(r[i],"empty")&&r[i].push("empty"))}}),r}function o(r,a){t(r).children().each(function(r,n){var i=t(n).attr("type"),c=n.tagName,d=t(n).attr(u),l=d!==e&&""!==d;if(l===!1)return o(n,a),e;if("DIV"!==c){var s=t(n).attr(f),h=s!==e&&s!==!1;if(h)if("checkbox"===i){a[d]===e&&(a[d]=[]);var v=t(n).prop("checked");v!==e&&v===!0&&a[d].push(n.value)}else if("radio"===i){var v=t(n).prop("checked");v!==e&&v===!0&&(a[d]=n.value)}else a[d]=n.value}else{var p={};if(o(n,p),0!==Object.keys(p).length)if(a[d]!==e){if(typeof a[d]==typeof{}){var y=a[d];a[d]=[],a[d].push(y)}a[d].push(p)}else a[d]=p}})}var u="data-key",c="data-required",f="data-modified",d=!1,l=null;return{attach:function(t,n){return d===!0?(console.error("DOMson already attached"),e):(r(n),a(t),d===!0)},detach:function(){return n(),d===!1},validate:function(){return null===l||d===!1?(console.error("DOMson is not attached"),e):i()},"export":function(){if(null===l||d===!1)return console.error("DOMson is not attached"),e;var t={};return o(l,t),t}}}(jQuery);
