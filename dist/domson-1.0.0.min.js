"use strict";var DOMson=function(t,e){function r(t){if(t!==e){var r=t.keywords;if(r!==e){var a=r.dataKey,n=r.dataRequired,i=r.dataModified;a!==e&&""!==a&&(u=a),n!==e&&""!==n&&(c=n),i!==e&&""!==i&&(f=i)}}}function a(r){d=t(r!==e?r:"*"),d.find(":input").on("change",function(){var r=t(this).attr("type"),a=t(this).attr(u);a!==e&&""!==a&&("checkbox"===r?t("["+u+"="+a+"]").attr(f,!0):t(this).attr(f,!0))}),l=!0}function n(){null!==d&&l&&(d.off("change"),d=null,l=!1)}function i(){var r={};return d.find("["+c+"]").each(function(a,n){var i=t(n).attr(u);if(i!==e&&""!==i){var o=t(n).attr(c),f=o!==e&&o!==!1;f!==!1&&(n.value===e||""===n.value)&&(r[i]===e&&(r[i]=[]),-1===t.inArray(r[i],"empty")&&r[i].push("empty"))}}),r}function o(r,a){t(r).children().each(function(r,n){var i=t(n).attr("type"),c=n.tagName,l=t(n).attr(u),d=l!==e&&""!==l;if(d===!1)return o(n,a),e;if("DIV"!==c){var s=t(n).attr(f),h=s!==e&&s!==!1;if(h)if("checkbox"===i){a[l]===e&&(a[l]=[]);var v=t(n).prop("checked");v!==e&&v===!0&&a[l].push(n.value)}else if("radio"===i){var v=t(n).prop("checked");v!==e&&v===!0&&(a[l]=n.value)}else a[l]=n.value}else{var p={};if(o(n,p),0!==Object.keys(p).length)if(a[l]!==e){if(typeof a[l]==typeof{}){var y=a[l];a[l]=[],a[l].push(y)}a[l].push(p)}else a[l]=p}})}var u="data-key",c="data-required",f="data-modified",l=!1,d=null;return{attach:function(t,n){return l===!0?(console.error("DOMson already attached"),e):(r(n),a(t),l===!0)},detach:function(){return n(),l===!1},validate:function(){return null===d||l===!1?(console.error("DOMson is not attached"),e):i()},"export":function(){if(null===d||l===!1)return console.error("DOMson is not attached"),e;var t={};return o(d,t),t}}}(jQuery);
